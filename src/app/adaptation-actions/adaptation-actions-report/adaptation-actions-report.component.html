<div class="container">
  <form [formGroup]="form">
    <mat-vertical-stepper #stepper linear formArrayName="formArray">
      <mat-step formGroupName="0" [stepControl]="formArray?.get([0])">
        <ng-template matStepLabel>
          <span translate>Información de registro</span>
        </ng-template>

        <span translate>Tipo de acción de adaptación</span>
        <mat-radio-group
          #reportingEntityTypeControl="matRadioGroup"
          formControlName="adaptationActionTypeCtrl"
          class="custom-radio-group"
        >
          <mat-radio-button [matTooltip]="typesTooltipTxt[0]">
            <label translate>Tipo A - Instrumentos de políticas y planes </label>
          </mat-radio-button>
          <mat-radio-button [matTooltip]="typesTooltipTxt[1]" value="2">
            <label translate>Tipo B - Proyecto y programas</label>
          </mat-radio-button>
          <mat-radio-button [matTooltip]="typesTooltipTxt[2]" value="3">
            <label translate>Tipo C - Actividad</label>
          </mat-radio-button>
        </mat-radio-group>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Nombre de la acción de adaptación</mat-label>
          <input type="text" matInput formControlName="adaptationActionNameCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Objetivo de la acción de adaptación</mat-label>
          <input type="text" matInput formControlName="adaptationActionTargetCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Descripción de la acción de adaptación</mat-label>
          <input type="text" matInput formControlName="adaptationActionDescriptionCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Meta de la acción</mat-label>
          <input type="text" matInput formControlName="adaptationActionGoalCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <mat-form-field class="field-ppcn" appearance="fill">
          <mat-label translate
            >Identificación preliminar de los Objetivos de Desarrollo Sostenible (ODS) impactados</mat-label
          >
          <mat-select formControlName="adaptationActionODSCtrl" multiple>
            <mat-option *ngFor="let element of ods" [value]="element.code">
              <label translate>{{ element.name }}</label>
            </mat-option>
          </mat-select>
        </mat-form-field>

        <div fxLayout="row" class="button-box" fxLayoutAlign="end center">
          <app-generic-button (click)="stepper.next()" name="general.next"></app-generic-button>
        </div>
      </mat-step>

      <mat-step formGroupName="1" [stepControl]="formArray?.get([1])">
        <ng-template matStepLabel>
          <span translate>Ubicación geográfica</span>
        </ng-template>

        <mat-form-field class="field-ppcn" appearance="fill">
          <mat-label translate>Provincia donde se ejecuta la acción</mat-label>
          <mat-select formControlName="adaptationActionProvinceCtrl" multiple>
            <mat-option [value]="1">
              <label translate>Alajuela</label>
            </mat-option>

            <mat-option [value]="2">
              <label translate>San José</label>
            </mat-option>

            <mat-option [value]="3">
              <label translate>Limón</label>
            </mat-option>

            <mat-option [value]="4">
              <label translate>Puntarenas</label>
            </mat-option>

            <mat-option [value]="5">
              <label translate>Guanacaste</label>
            </mat-option>

            <mat-option [value]="6">
              <label translate>Cartago</label>
            </mat-option>

            <mat-option [value]="7">
              <label translate>Heredia</label>
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="field-ppcn" appearance="fill">
          <mat-label translate>Cantón donde se ejecuta la acción</mat-label>
          <mat-select formControlName="adaptationActionCantonCtrl" multiple>
            <mat-option [value]="1">
              <label translate>Option 1</label>
            </mat-option>

            <mat-option [value]="2">
              <label translate>Option 2</label>
            </mat-option>

            <mat-option [value]="3">
              <label translate>Option 3</label>
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="field-ppcn" appearance="fill">
          <mat-label translate>Distrito donde se ejecuta la acción</mat-label>
          <mat-select formControlName="adaptationActionDistritCtrl" multiple>
            <mat-option [value]="1">
              <label translate>Option 1</label>
            </mat-option>

            <mat-option [value]="2">
              <label translate>Option 2</label>
            </mat-option>

            <mat-option [value]="3">
              <label translate>Option 3</label>
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Descripción narrativa localización donde se desarrolla la acción</mat-label>
          <input type="text" matInput formControlName="adaptationActionDescriptionNarrativeCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Localización geográfica de la acción</mat-label>
          <input type="text" matInput formControlName="adaptationActionLocationCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <div fxLayout="row" class="button-box" fxLayoutAlign="end center">
          <app-generic-button-secondary (click)="stepper.previous()" name="general.back">
          </app-generic-button-secondary>
          <app-generic-button (click)="stepper.next()" name="general.next"></app-generic-button>
        </div>
      </mat-step>

      <mat-step formGroupName="2" [stepControl]="formArray?.get([2])">
        <ng-template matStepLabel>
          <span translate>Categorización con instrumentos nacionales</span>
        </ng-template>

        <mat-form-field class="field-ppcn" appearance="fill">
          <mat-label translate>Seleccione el tema al que pertenece la acción</mat-label>
          <mat-select (selectionChange)="changeSubTopics($event.value)" formControlName="adaptationActionThemeCtrl">
            <mat-option *ngFor="let topic of topics" [value]="topic.code">
              <label translate>{{ topic.name }}</label>
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="field-ppcn" appearance="fill">
          <mat-label translate>Seleccione la tipología de acción </mat-label>
          <mat-select formControlName="adaptationActionTypologyCtrl">
            <mat-option *ngFor="let subTopic of subTopicsToShow" [value]="subTopic.code">
              <label translate>{{ subTopic.name }}</label>
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Relación con las metas de la NDC</mat-label>
          <input type="text" matInput formControlName="adaptationActionGoalRelationCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Relación con Política Nacional de Adaptación al que pertenece la acción (Eje)</mat-label>
          <input type="text" matInput formControlName="adaptationActionEjeRelationCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <mat-form-field class="field-ppcn">
          <mat-label translate
            >Relación con Política Nacional de Adaptación al que pertenece la acción (Lineamiento)</mat-label
          >
          <input type="text" matInput formControlName="adaptationActionLinealRelationCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <div fxLayout="row" class="button-box" fxLayoutAlign="end center">
          <app-generic-button-secondary (click)="stepper.previous()" name="general.back">
          </app-generic-button-secondary>
          <app-generic-button (click)="stepper.next()" name="general.next"></app-generic-button>
        </div>
      </mat-step>

      <mat-step formGroupName="3" [stepControl]="formArray?.get([3])">
        <ng-template matStepLabel>
          <span translate>Relación con otros instrumentos</span>
        </ng-template>

        <mat-form-field class="field-ppcn">
          <mat-label translate
            >En caso de aplicar, indique el nombre de instrumento al que pertenece la acción</mat-label
          >
          <input type="text" matInput formControlName="adaptationActionInstrumentCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Descripción cómo se ha integrado la adaptación dentro del instrumento</mat-label>
          <input type="text" matInput formControlName="adaptationActionDescriptionInstrumentCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <div fxLayout="row" class="button-box" fxLayoutAlign="end center">
          <app-generic-button-secondary (click)="stepper.previous()" name="general.back">
          </app-generic-button-secondary>
          <app-generic-button (click)="stepper.next()" name="general.next"></app-generic-button>
        </div>
      </mat-step>

      <mat-step formGroupName="4" [stepControl]="formArray?.get([4])">
        <ng-template matStepLabel>
          <span translate>Amenaza climática relacionada</span>
        </ng-template>

        <mat-form-field class="field-ppcn" appearance="fill">
          <mat-label translate>Amenaza climática relacionada</mat-label>
          <mat-select #climateValue formControlName="adaptationActionClimateThreatCtrl">
            <mat-option [value]="1">
              <label translate>Deslizamiento</label>
            </mat-option>

            <mat-option [value]="2">
              <label translate>inundación</label>
            </mat-option>

            <mat-option [value]="3">
              <label translate>avenida torrencial</label>
            </mat-option>

            <mat-option [value]="4">
              <label translate>ola de calor</label>
            </mat-option>

            <mat-option [value]="5">
              <label translate>sequía</label>
            </mat-option>

            <mat-option [value]="6">
              <label translate>Otro</label>
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field *ngIf="climateValue.value === 6" class="field-ppcn">
          <mat-label translate>Amenaza climática relacionada (otro)</mat-label>
          <input type="text" matInput formControlName="adaptationActionClimateThreatOtherCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <div fxLayout="row" fxLayoutAlign=" center">
          <mat-form-field class="field-ppcn">
            <mat-label translate>Fuente de información sobre la amenaza climática</mat-label>
            <input matInput formControlName="adaptationActionInfoSourceCtrl" />
            <mat-error translate>errorLabel.fieldRequired</mat-error>
          </mat-form-field>
          <input type="file" name="filename2" />
          <br />
        </div>

        <div fxLayout="row" class="button-box" fxLayoutAlign="end center">
          <app-generic-button-secondary (click)="stepper.previous()" name="general.back">
          </app-generic-button-secondary>
          <app-generic-button (click)="stepper.next()" name="general.next"></app-generic-button>
        </div>
      </mat-step>

      <mat-step formGroupName="5" [stepControl]="formArray?.get([5])">
        <ng-template matStepLabel>
          <span translate>Implementación</span>
        </ng-template>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Inicio de la implementación</mat-label>
          <input
            matInput
            [placeholder]="'Choose a date' | translate"
            [matDatepicker]="adaptationActionStartDate"
            formControlName="adaptationActionStartDateCtrl"
          />

          <mat-datepicker-toggle matSuffix [for]="adaptationActionStartDate"></mat-datepicker-toggle>
          <mat-datepicker #adaptationActionStartDate startView="year"></mat-datepicker>

          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Finalización de la implementación</mat-label>
          <input
            matInput
            [placeholder]="'Choose a date' | translate"
            [matDatepicker]="adaptationActionEndDate"
            formControlName="adaptationActionEndDateCtrl"
          />

          <mat-datepicker-toggle matSuffix [for]="adaptationActionEndDate"></mat-datepicker-toggle>
          <mat-datepicker #adaptationActionEndDate startView="year"></mat-datepicker>

          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Tiempo de duración de la acción (meses)</mat-label>
          <input type="text" matInput formControlName="adaptationActionDurationTimeCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Entidad responsable de ejecución de la acción de adaptación</mat-label>
          <input type="text" matInput formControlName="adaptationActionEntityCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Otras entidades involucradas en la acción de adaptación</mat-label>
          <input type="text" matInput formControlName="adaptationActionEntityOthersCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <mat-form-field class="field-ppcn">
          <mat-label translate>Código de la acción</mat-label>
          <input type="text" matInput formControlName="adaptationActionCodeCtrl" />
          <mat-error translate>errorLabel.fieldRequired</mat-error>
        </mat-form-field>

        <div fxLayout="row" class="button-box" fxLayoutAlign="end center">
          <app-generic-button-secondary (click)="stepper.previous()" name="general.back">
          </app-generic-button-secondary>
          <app-generic-button (click)="submitForm()" name="general.next"></app-generic-button>
        </div>
      </mat-step>
    </mat-vertical-stepper>
  </form>
</div>
