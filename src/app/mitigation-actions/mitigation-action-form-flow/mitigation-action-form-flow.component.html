<div class="container">
  <mat-card>
    <h3>
      <mat-card-title>
        <span class="section-heading" translate>{{title}}</span>
        <mat-divider class="divider-custom"></mat-divider>
        <mat-divider class="divider-custom"></mat-divider>
      </mat-card-title>
    </h3>

      <form [formGroup]="mainGroup" *ngIf="processedNewFormData | async">
        <!-- {{!isLinear ? 'Enable linear mode' : 'Disable linear mode'}} -->
        <mat-horizontal-stepper formArrayName="formArray" [linear]="isLinear">
  
          
            <mat-step formGroupName="0" [stepControl]="formArray?.get([0])">
                <ng-template matStepLabel><span translate>specificLabel.registerInitiatives</span></ng-template>
                <app-initiative-form 
                [newFormData]="newFormData" 
                [processedNewFormData]="processedNewFormData" [isUpdating]="isUpdating"></app-initiative-form>
                <div class="align-right">
                  <button  mat-button matStepperNext [disabled]="!initiativeForm.wasSubmittedSuccessfully" class="mat-raised-button mat-primary">
                    <span translate>general.next</span>
                    <mat-icon color="white">arrow_forward</mat-icon>
                  </button>
                </div>
              </mat-step>
  
          <mat-step formGroupName="1" [stepControl]="formArray?.get([1])">
            <ng-template matStepLabel><span translate>info.basicInfo</span></ng-template>
            <app-basic-information-form [newFormData]="newFormData" [processedNewFormData]="processedNewFormData" [isUpdating]="isUpdating">
            </app-basic-information-form>
            <div class="align-right">
                <button mat-button matStepperNext [disabled]="!basicInfoForm.wasSubmittedSuccessfully" class="mat-raised-button mat-primary">
                  <span translate>general.next</span>
                  <mat-icon color="white">arrow_forward</mat-icon>
                </button>
              </div>
            <div class="align-right">
              <button type="button" mat-button matStepperPrevious [disabled]="basicInfoForm.wasSubmittedSuccessfully" class="mat-raised-button mat-accent">
                <mat-icon color="white">arrow_back</mat-icon>
                <span translate>general.back</span>
              </button>
            </div>
  
          </mat-step>
  
  
  
            <mat-step formGroupName="2" [stepControl]="formArray?.get([2])">
                <ng-template matStepLabel><span translate>general.keyAspects</span></ng-template>
                <app-key-aspects-form [newFormData]="newFormData" [processedNewFormData]="processedNewFormData" [isUpdating]="isUpdating">
                </app-key-aspects-form>
                <div class="align-right">
                    <button mat-button matStepperNext [disabled]="!keyAspectsForm.wasSubmittedSuccessfully" class="mat-raised-button mat-primary">
                      <span translate>general.next</span>
                      <mat-icon color="white">arrow_forward</mat-icon>
                    </button>
                  </div>
                <div class="align-right">
                  <button type="button" mat-button matStepperPrevious [disabled]="keyAspectsForm.wasSubmittedSuccessfully" class="mat-raised-button mat-accent">
                    <mat-icon color="white">arrow_back</mat-icon>
                    <span translate>general.back</span>
                  </button>
                </div>
      
              </mat-step>
  
  
          <mat-step formGroupName="3" [stepControl]="formArray?.get([3])">
            <ng-template matStepLabel><span translate>specificLabel.mitigationEmissions</span></ng-template>
            <app-emissions-mitigation-form [newFormData]="newFormData" [processedNewFormData]="processedNewFormData" [isUpdating]="isUpdating">
            </app-emissions-mitigation-form>
            <div class="align-right">
                <button mat-button matStepperNext [disabled]="!emissionsMitigationForm.wasSubmittedSuccessfully" class="mat-raised-button mat-primary">
                  <span translate>general.next</span>
                  <mat-icon color="white">arrow_forward</mat-icon>
                </button>
              </div>
            <div class="align-right">
              <button type="button" mat-button matStepperPrevious [disabled]="emissionsMitigationForm.wasSubmittedSuccessfully" class="mat-raised-button mat-accent">
                <mat-icon color="white">arrow_back</mat-icon>
                <span translate>general.back</span>
              </button>
            </div>
  
          </mat-step>
  
          <mat-step formGroupName="4" [stepControl]="formArray?.get([4])">
            <ng-template matStepLabel><span translate>specificLabel.impactImplementation</span></ng-template>
            <app-impact-form [newFormData]="newFormData" [processedNewFormData]="processedNewFormData" [isUpdating]="isUpdating"> </app-impact-form>
            <div class="align-right">
              <button type="button" mat-button matStepperPrevious [disabled]="impactForm.wasSubmittedSuccessfully" class="mat-raised-button mat-accent">
                <mat-icon color="white">arrow_back</mat-icon>
                <span translate>general.back</span>
              </button>
            </div>
  
          </mat-step>
  
  
        </mat-horizontal-stepper>
        <!-- <div class="margin-20">
            <div>form main group details:-</div>
            <pre>Is mainGroup valid?: <br>{{mainGroup.valid | json}}</pre>
            <pre>form value: <br>{{mainGroup.value | json}}</pre>
  
        </div> -->
      </form>
    <!-- </div> -->

  </mat-card>
</div>
